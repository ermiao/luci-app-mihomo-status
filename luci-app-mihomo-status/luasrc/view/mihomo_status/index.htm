<%+header%>
<h2>Mihomo 状态</h2>
<style>
  .mihomo-status-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1em;
  }
  .mihomo-status-table th, .mihomo-status-table td {
    padding: 0.6em;
    border: 1px solid #ccc;
    text-align: left;
  }
</style>
<table class="mihomo-status-table" id="mihomo_status_table"></table>
<script type="text/javascript">
  XHR.get('<%=luci.dispatcher.build_url("admin/status/mihomo_status/data")%>', null,
    function(x, st) {
      var tb = document.getElementById("mihomo_status_table");
      tb.innerHTML = "";
      if (st) {
        for (var key in st) {
          var row = tb.insertRow(-1);
          row.insertCell(-1).innerHTML = key;
          row.insertCell(-1).innerHTML = st[key];
        }
      } else {
        var row = tb.insertRow(-1);
        row.insertCell(-1).innerHTML = "错误";
        row.insertCell(-1).innerHTML = "无法获取状态信息";
      }
    }
  );
</script>
<%+footer%>
